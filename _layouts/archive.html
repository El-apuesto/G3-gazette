---
layout: default
---

<div class="archive-header">
  <div class="container">
    <h1 class="archive-title">{{ page.title | default: "Blog Archive" }}</h1>
    <p class="archive-description">
      {{ page.description | default: "Explore all our articles about grants, funding opportunities, and success stories." }}
    </p>
    <p class="archive-count">
      {{ site.posts.size }} articles and counting
    </p>
  </div>
</div>

<div class="container">
  
  <!-- Featured Posts -->
  {% assign featured_posts = site.posts | where: "featured", true %}
  {% if featured_posts.size > 0 %}
  <section class="featured-posts">
    <div class="featured-posts-header">
      <h2>Featured Articles</h2>
      <span class="featured-badge">Editor's Picks</span>
    </div>
    
    {% assign hero_post = featured_posts.first %}
    {% if hero_post %}
    <a href="{{ hero_post.url }}" class="featured-post-hero">
      {% if hero_post.featured_image %}
      <img src="{{ hero_post.featured_image }}" alt="{{ hero_post.title }}" class="featured-post-hero-image">
      {% else %}
      <div class="featured-post-hero-image" style="background: linear-gradient(135deg, var(--primary-500), var(--primary-600));"></div>
      {% endif %}
      <div class="featured-post-hero-overlay">
        {% if hero_post.category %}
        <span class="featured-post-hero-category">{{ hero_post.category }}</span>
        {% endif %}
        <h2 class="featured-post-hero-title">{{ hero_post.title }}</h2>
        <p class="featured-post-hero-excerpt">{{ hero_post.excerpt | strip_html | truncatewords: 30 }}</p>
        <div class="featured-post-hero-meta">
          <span>{{ hero_post.date | date: "%B %-d, %Y" }}</span>
          {% if hero_post.author %}
          <span>• {{ hero_post.author }}</span>
          {% endif %}
        </div>
      </div>
    </a>
    {% endif %}
    
    {% if featured_posts.size > 1 %}
    <div class="featured-posts-grid">
      {% for post in featured_posts offset:1 limit:3 %}
      <a href="{{ post.url }}" class="featured-post-card blog-card">
        {% if post.featured_image %}
        <img src="{{ post.featured_image }}" alt="{{ post.title }}" class="blog-card-image">
        {% else %}
        <div class="blog-card-image" style="background: linear-gradient(135deg, var(--primary-500), var(--primary-600));"></div>
        {% endif %}
        <div class="blog-card-content">
          {% if post.category %}
          <span class="blog-category">{{ post.category }}</span>
          {% endif %}
          <h3>{{ post.title }}</h3>
          <p>{{ post.excerpt | strip_html | truncatewords: 20 }}</p>
          <div class="blog-card-meta">
            <span>{{ post.date | date: "%b %-d, %Y" }}</span>
          </div>
        </div>
      </a>
      {% endfor %}
    </div>
    {% endif %}
  </section>
  {% endif %}
  
  <!-- Filters -->
  <div class="archive-filters">
    <!-- Category Filters -->
    <div class="filter-section">
      <span class="filter-label">Categories</span>
      <div class="filter-pills category-filters">
        <a href="/archive" class="filter-pill" data-filter="all">All Posts</a>
        {% assign categories = site.posts | map: "category" | uniq | sort %}
        {% for category in categories %}
          {% if category %}
          {% assign cat_count = site.posts | where: "category", category | size %}
          <a href="/category/{{ category | slugify }}" class="filter-pill" data-filter="{{ category | slugify }}">
            {{ category }}
            <span class="filter-pill-count">({{ cat_count }})</span>
          </a>
          {% endif %}
        {% endfor %}
      </div>
    </div>
    
    <!-- Tag Filters (Top 10) -->
    {% assign all_tags = "" | split: "" %}
    {% for post in site.posts %}
      {% for tag in post.tags %}
        {% assign all_tags = all_tags | push: tag %}
      {% endfor %}
    {% endfor %}
    {% assign sorted_tags = all_tags | uniq | sort %}
    
    {% if sorted_tags.size > 0 %}
    <div class="filter-section">
      <span class="filter-label">Popular Tags</span>
      <div class="filter-pills">
        {% for tag in sorted_tags limit:10 %}
        <a href="/tag/{{ tag | slugify }}" class="filter-pill">{{ tag }}</a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>
  
  <!-- Sort Options -->
  <div class="archive-sort">
    <span class="sort-label">Showing {{ site.posts.size }} articles</span>
    <select class="sort-select" id="archiveSort">
      <option value="date-desc">Newest First</option>
      <option value="date-asc">Oldest First</option>
      <option value="title">Title (A-Z)</option>
    </select>
  </div>
  
  <!-- Posts Grid -->
  <div class="archive-posts" id="archivePosts">
    {% for post in site.posts %}
    <article class="archive-post-card" data-date="{{ post.date | date: '%Y%m%d' }}" data-title="{{ post.title | slugify }}">
      <a href="{{ post.url }}">
        {% if post.featured_image %}
        <img src="{{ post.featured_image }}" alt="{{ post.title }}" class="archive-post-image">
        {% else %}
        <div class="archive-post-image"></div>
        {% endif %}
        
        {% if post.pinned %}
        <span class="post-pinned-badge">Pinned</span>
        {% endif %}
        
        <div class="archive-post-content">
          {% if post.category %}
          <span class="archive-post-category">{{ post.category }}</span>
          {% endif %}
          
          <h3 class="archive-post-title">{{ post.title }}</h3>
          <p class="archive-post-excerpt">{{ post.excerpt | strip_html | truncatewords: 25 }}</p>
          
          <div class="archive-post-meta">
            <span>{{ post.date | date: "%b %-d, %Y" }}</span>
            {% if post.author %}
            <span>• {{ post.author }}</span>
            {% endif %}
          </div>
        </div>
      </a>
    </article>
    {% endfor %}
  </div>
  
  <!-- Newsletter CTA -->
  <div class="newsletter-inline">
    <div class="newsletter-content">
      <h3>Stay Updated on Grant Opportunities</h3>
      <p>Get weekly insights, funding alerts, and expert tips delivered straight to your inbox.</p>
      <form class="newsletter-form">
        <input type="email" class="newsletter-input" placeholder="Enter your email" required>
        <button type="submit" class="newsletter-button">Subscribe Free</button>
      </form>
      <p class="newsletter-privacy">No spam. Unsubscribe anytime.</p>
    </div>
  </div>
  
</div>

<script>
// Simple client-side sorting
document.getElementById('archiveSort')?.addEventListener('change', function(e) {
  const container = document.getElementById('archivePosts');
  const posts = Array.from(container.children);
  const sortValue = e.target.value;
  
  posts.sort((a, b) => {
    if (sortValue === 'date-desc') {
      return b.dataset.date.localeCompare(a.dataset.date);
    } else if (sortValue === 'date-asc') {
      return a.dataset.date.localeCompare(b.dataset.date);
    } else if (sortValue === 'title') {
      return a.dataset.title.localeCompare(b.dataset.title);
    }
  });
  
  posts.forEach(post => container.appendChild(post));
});
</script>
